<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>å­¦ç¿’æ—¥è¨˜ - å­¦ä¹ æ—¥è®°</title>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Serif+JP:wght@400;600&display=swap" rel="stylesheet">
    <!-- å¼•å…¥ FontAwesome å›¾æ ‡åº“ï¼Œè¿˜åŸåŸç‰ˆå·¥å…·æ  UI -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome/css/font-awesome.min.css">
    
    <style>
        :root {
            --bg-color: #F7F5F0; --card-bg: #FFFFFF; --text-main: #333333; --text-light: #8E8B82;
            --accent-color: #6B8E6B; --accent-hover: #526E52; --border-color: #E8E4D9;
            --memo-bg: #FFF9E6; --memo-border: #F2E3A9; --error-color: #D37B7B;
        }
        @media (prefers-color-scheme: dark) {
            :root {
                --bg-color: #121212; --card-bg: #1E1E1E; --text-main: #E0E0E0; --text-light: #A0A0A0;
                --accent-color: #82A882; --accent-hover: #96C296; --border-color: #333333;
                --memo-bg: #2A2820; --memo-border: #4A4630; --error-color: #E59898;
            }
        }
        body {
            font-family: 'Noto Serif JP', 'Yu Mincho', 'å®‹ä½“', serif; background-color: var(--bg-color);
            color: var(--text-main); line-height: 1.8; margin: 0; padding: 0;
            -webkit-font-smoothing: antialiased; transition: background-color 0.3s, color 0.3s;
        }
        .container { max-width: 680px; margin: 0 auto; padding: 20px; padding-bottom: 120px; }
        header { text-align: center; margin: 30px 0; }
        header h1 { font-size: 26px; font-weight: 600; margin-bottom: 5px; color: var(--text-main); }
        .card { background: var(--card-bg); border-radius: 12px; box-shadow: 0 4px 20px rgba(0, 0, 0, 0.05); padding: 25px; margin-bottom: 25px; border: 1px solid var(--border-color); }
        h2 { font-size: 16px; font-weight: 600; color: var(--text-light); margin-top: 0; margin-bottom: 15px; border-bottom: 1px solid var(--border-color); padding-bottom: 10px; }
        
        textarea { width: 100%; padding: 12px; border: 1px solid var(--border-color); border-radius: 8px; box-sizing: border-box; font-family: inherit; font-size: 15px; color: var(--text-main); background: transparent; transition: all 0.3s ease; resize: vertical; }
        textarea:focus { border-color: var(--accent-color); outline: none; box-shadow: 0 0 0 2px rgba(107, 142, 107, 0.1); }
        .memo-box { background-color: var(--memo-bg); border: 1px solid var(--memo-border); border-left: 4px solid #D6C27A; margin-bottom: 20px; }
        
        .upload-area { margin-top: 15px; margin-bottom: 20px; display: flex; align-items: center; gap: 10px; }
        input[type="file"] { display: none; }
        .upload-btn { background: transparent; border: 1px dashed var(--accent-color); color: var(--accent-color); padding: 8px 16px; border-radius: 6px; cursor: pointer; font-size: 14px; transition: all 0.2s; }
        .upload-btn:hover { background: rgba(107, 142, 107, 0.1); }
        
        #preview-container { display: none; position: relative; max-width: 150px; }
        #preview-img { width: 100%; border-radius: 6px; border: 1px solid var(--border-color); }
        .remove-img { position: absolute; top: -8px; right: -8px; background: var(--error-color); color: white; border-radius: 50%; width: 20px; height: 20px; text-align: center; line-height: 18px; cursor: pointer; font-size: 12px; font-weight: bold; }
        
        .btn-submit { background: var(--accent-color); color: #fff; border: none; padding: 12px 20px; border-radius: 8px; cursor: pointer; font-size: 15px; width: 100%; transition: background 0.2s; }
        .btn-submit:hover { background: var(--accent-hover); }
        .btn-delete { background: transparent; border: 1px solid var(--error-color); color: var(--error-color); padding: 4px 12px; border-radius: 6px; cursor: pointer; font-size: 13px; transition: all 0.2s; }
        .btn-delete:hover { background: var(--error-color); color: #fff; }
        
        .entry-item { padding: 20px 0; border-bottom: 1px solid var(--border-color); }
        .entry-item:last-child { border-bottom: none; }
        .entry-date { font-size: 13px; color: var(--text-light); }
        .entry-memo { background: var(--memo-bg); padding: 10px 15px; border-radius: 4px; font-size: 14px; margin-bottom: 15px; border-left: 3px solid #D6C27A; white-space: pre-wrap; color: var(--text-main); }
        .entry-text { white-space: pre-wrap; font-size: 15px; margin-bottom: 10px; }
        .entry-image { max-width: 100%; border-radius: 8px; margin-top: 10px; }
        
        #auth-overlay { position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: var(--bg-color); z-index: 9999; display: flex; align-items: center; justify-content: center; }
        .auth-card { background: var(--card-bg); padding: 30px; border-radius: 12px; text-align: center; border: 1px solid var(--border-color); }
        .auth-card input { padding: 10px; width: 100%; margin: 15px 0; border: 1px solid var(--border-color); border-radius: 6px; text-align: center; font-size: 16px; background: transparent; color: var(--text-main); }
        .auth-card button { background: var(--accent-color); color: white; border: none; padding: 10px 20px; border-radius: 6px; cursor: pointer; width: 100%; }
        .msg { text-align: center; margin-top: 10px; font-size: 13px; }

        /* ========================================= */
        /* ä¸¥æ ¼å‚ç…§ live2d-widget çš„åŸç‰ˆ UI æ ·å¼ */
        /* ========================================= */
        #waifu {
            position: fixed;
            bottom: 0;
            right: 0;
            z-index: 9998;
            pointer-events: none; 
            display: flex;
            align-items: flex-end;
            transition: all 0.3s ease-in-out;
        }

        #waifu-tool {
            display: flex;
            flex-direction: column;
            pointer-events: auto;
            margin-bottom: 50px;
            margin-right: 10px;
            opacity: 0;
            transform: translateX(20px);
            transition: all 0.3s;
        }
        #waifu:hover #waifu-tool { opacity: 1; transform: translateX(0); }
        
        #waifu-tool span {
            display: block; width: 32px; height: 32px; line-height: 32px;
            text-align: center; color: #5b6c7d; cursor: pointer;
            transition: color 0.2s; font-size: 18px; margin-bottom: 8px;
        }
        #waifu-tool span:hover { color: #0684bd; }

        #waifu-canvas { pointer-events: auto; cursor: grab; }
        #waifu-canvas:active { cursor: grabbing; }

        #waifu-tips {
            position: absolute; top: -70px; right: 40px; width: 250px; min-height: 40px;
            background-color: rgba(255, 255, 255, 0.95); border: 1px solid #e1e1e1;
            border-radius: 12px; padding: 10px 15px; box-shadow: 0 3px 15px rgba(0,0,0,0.1);
            font-size: 13px; color: #333; opacity: 0; pointer-events: auto;
            transition: opacity 0.3s; word-break: break-all;
        }
        #waifu-tips::after {
            content: ''; position: absolute; bottom: -8px; right: 30px;
            width: 15px; height: 15px; background-color: rgba(255, 255, 255, 0.95);
            border-right: 1px solid #e1e1e1; border-bottom: 1px solid #e1e1e1;
            transform: rotate(45deg);
        }
        .waifu-tips-active { opacity: 1 !important; animation: shake 0.8s ease-in-out; }
        
        @keyframes shake {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-5px); }
        }
    </style>
</head>
<body>

    <div id="auth-overlay">
        <div class="auth-card">
            <h2 style="border:none; margin:0; font-size: 18px;">ç©ºé–“èªè¨¼</h2>
            <input type="password" id="loginPwd" placeholder="è¯·è¾“å…¥è®¿é—®å¯†ç ">
            <button onclick="verifyPassword()">å…¥å®¤ã™ã‚‹ (Enter)</button>
            <div id="login-msg" class="msg" style="color: var(--error-color);"></div>
        </div>
    </div>

    <div class="container">
        <header>
            <h1>å­¦ç¿’æ—¥è¨˜</h1>
        </header>

        <div class="card">
            <h2>ğŸ“ æ–°çš„ä¸€å¤©</h2>
            <textarea id="memoInput" class="memo-box" rows="2" placeholder="ğŸ“Œ ä¾¿ç­¾ / å¤‡å¿˜å½• (ä¾‹å¦‚: ä»Šæ™šè®°å¾—å¤ä¹ åŠ¨è¯å˜å½¢...)"></textarea>
            <textarea id="diaryInput" rows="6" placeholder="ä»Šå¤©å­¦ä¹ äº†ä»€ä¹ˆï¼Ÿè®°å½•ä¸€ä¸‹å§..."></textarea>
            
            <div class="upload-area">
                <label for="imageUpload" class="upload-btn">ğŸ“· æ·»åŠ å›¾ç‰‡</label>
                <input type="file" id="imageUpload" accept="image/*" onchange="handleImageSelect(event)">
                <div id="preview-container">
                    <span class="remove-img" onclick="removeImage()">Ã—</span>
                    <img id="preview-img" src="">
                </div>
            </div>

            <button class="btn-submit" onclick="saveEntry()">ä¿å­˜è¨˜éŒ² (Save)</button>
            <div id="save-msg" class="msg"></div>
        </div>

        <div class="card">
            <h2>ğŸ“š å†å²è®°å½•</h2>
            <div id="entries-list">
                <p style="text-align: center; color: var(--text-light);">åŠ è½½ä¸­...</p>
            </div>
        </div>
    </div>

    <!-- çœ‹æ¿å¨˜UI -->
    <div id="waifu">
        <div id="waifu-tips"></div>
        
        <div id="waifu-tool">
            <span class="fa fa-lg fa-comment" onclick="showMessage('è¦å¥½å¥½å­¦ä¹ æ—¥è¯­å“¦ï¼ä¸è¦å·æ‡’~')" title="èŠå¤©"></span>
            <span class="fa fa-lg fa-paper-plane" onclick="showMessage('é­”æ³•ä½¿çš„å¯¿å‘½å¯æ˜¯å¾ˆé•¿çš„ã€‚')" title="ä¸€è¨€"></span>
            <span class="fa fa-lg fa-camera-retro" onclick="showMessage('ç…§ç›¸æœºåŠŸèƒ½è°ƒè¯•ä¸­...')" title="æ‹ç…§"></span>
            <span class="fa fa-lg fa-times" onclick="document.getElementById('waifu').style.display='none'" title="éšè—"></span>
        </div>
        
        <canvas id="waifu-canvas" width="280" height="320"></canvas>
    </div>

    <!-- ğŸŒŸ ç»ˆæè§£å†³æ–¹æ¡ˆï¼šåŒæ—¶å¼•å…¥æ–°æ—§åŒæ ¸å¿ƒï¼Œå½»åº•è§£å†³å¼•æ“åˆå§‹åŒ–å¤±è´¥çš„é—®é¢˜ ğŸŒŸ -->
    <!-- 1. Cubism 2 Core (æ—§ç‰ˆæ ¸å¿ƒï¼Œå“ªæ€•ä¸ç”¨ä¹Ÿå¿…é¡»å¼•å…¥å½“å ä½ç¬¦ï¼Œå¦åˆ™å¼•æ“ä¼šç½¢å·¥æŠ¥é”™) -->
    <script src="https://cdn.jsdelivr.net/gh/dylanNew/live2d/webgl/Live2D/lib/live2d.min.js"></script>
    <!-- 2. Cubism 4 Core (çœŸæ­£ç”¨äºè§£æèŠ™è‰è² .moc3 çš„ç°ä»£æ ¸å¿ƒ) -->
    <script src="https://cdn.jsdelivr.net/npm/live2dcubismcore@1.0.3/live2dcubismcore.min.js"></script>
    <!-- 3. PIXI æ¸²æŸ“å¼•æ“ -->
    <script src="https://cdn.jsdelivr.net/npm/pixi.js@6.5.2/dist/browser/pixi.min.js"></script>
    <!-- 4. PIXI Live2D Display (æœ€å¼ºå¤§çš„å…¨èƒ½åŠ è½½å™¨) -->
    <script src="https://cdn.jsdelivr.net/npm/pixi-live2d-display@0.4.0/dist/index.min.js"></script>

    <script>
        // ==========================================
        // å‰åç«¯äº¤äº’é€»è¾‘
        // ==========================================
        const API_BASE = '/api/diary';
        let currentPwd = localStorage.getItem('site_pwd') || '';
        let currentImageBase64 = null;

        window.onload = () => {
            initLive2D(); // åŠ è½½çœ‹æ¿å¨˜
            if (currentPwd) loadEntries(true); 
        };

        async function verifyPassword() {
            const pwdInput = document.getElementById('loginPwd').value;
            const msgEl = document.getElementById('login-msg');
            if (!pwdInput) return;
            msgEl.textContent = 'éªŒè¯ä¸­...'; msgEl.style.color = 'var(--text-light)';
            try {
                const res = await fetch(API_BASE, { headers: { 'Authorization': pwdInput } });
                if (res.ok) {
                    currentPwd = pwdInput; localStorage.setItem('site_pwd', currentPwd);
                    document.getElementById('auth-overlay').style.display = 'none';
                    loadEntries(false);
                    setTimeout(() => showMessage("æ¬¢è¿å›æ¥ï¼ä»Šå¤©ä¹Ÿè¦å¥½å¥½è®°å½•å“¦~"), 1000);
                } else {
                    msgEl.textContent = 'å¯†ç é”™è¯¯'; msgEl.style.color = 'var(--error-color)';
                }
            } catch (err) {
                msgEl.textContent = 'ç½‘ç»œé”™è¯¯'; msgEl.style.color = 'var(--error-color)';
            }
        }

        function handleImageSelect(event) {
            const file = event.target.files[0]; if (!file) return;
            const reader = new FileReader();
            reader.onload = function(e) {
                const img = new Image();
                img.onload = function() {
                    const canvas = document.createElement('canvas');
                    let width = img.width; let height = img.height; const MAX_WIDTH = 1000;
                    if (width > MAX_WIDTH) { height *= MAX_WIDTH / width; width = MAX_WIDTH; }
                    canvas.width = width; canvas.height = height;
                    const ctx = canvas.getContext('2d'); ctx.drawImage(img, 0, 0, width, height);
                    currentImageBase64 = canvas.toDataURL('image/jpeg', 0.8);
                    document.getElementById('preview-img').src = currentImageBase64;
                    document.getElementById('preview-container').style.display = 'block';
                };
                img.src = e.target.result;
            };
            reader.readAsDataURL(file);
        }

        function removeImage() {
            currentImageBase64 = null; document.getElementById('imageUpload').value = '';
            document.getElementById('preview-container').style.display = 'none';
        }

        async function saveEntry() {
            const memo = document.getElementById('memoInput').value.trim();
            const diary = document.getElementById('diaryInput').value.trim();
            const msgEl = document.getElementById('save-msg');

            if (!memo && !diary && !currentImageBase64) {
                msgEl.textContent = 'è¯·å¡«å†™å†…å®¹æˆ–ä¸Šä¼ å›¾ç‰‡'; msgEl.style.color = 'var(--error-color)'; return;
            }
            msgEl.textContent = 'ä¿å­˜ä¸­...'; msgEl.style.color = 'var(--text-light)';
            const payload = { memo, diary, image: currentImageBase64 };

            try {
                const res = await fetch(API_BASE, {
                    method: 'POST', headers: { 'Content-Type': 'application/json', 'Authorization': currentPwd },
                    body: JSON.stringify(payload)
                });
                if (res.ok) {
                    msgEl.textContent = 'ä¿å­˜æˆåŠŸ'; msgEl.style.color = 'var(--accent-color)';
                    document.getElementById('memoInput').value = ''; document.getElementById('diaryInput').value = '';
                    removeImage(); loadEntries(false);
                    showMessage("è®°å½•ä¿å­˜æˆåŠŸå•¦ï¼çœŸå‰å®³~"); 
                    setTimeout(() => msgEl.textContent = '', 2000);
                } else {
                    msgEl.textContent = 'ä¿å­˜å¤±è´¥'; msgEl.style.color = 'var(--error-color)';
                }
            } catch (err) {
                msgEl.textContent = 'ç½‘ç»œé”™è¯¯'; msgEl.style.color = 'var(--error-color)';
            }
        }

        async function loadEntries(isInit = false) {
            const listEl = document.getElementById('entries-list');
            try {
                const res = await fetch(API_BASE, { headers: { 'Authorization': currentPwd } });
                if (res.ok) {
                    if (isInit) document.getElementById('auth-overlay').style.display = 'none';
                    const data = await res.json(); renderEntries(data.entries);
                } else {
                    if (isInit) localStorage.removeItem('site_pwd');
                    else listEl.innerHTML = '<p style="color:var(--error-color)">è¯»å–å¤±è´¥</p>';
                }
            } catch (err) {
                if (!isInit) listEl.innerHTML = '<p style="color:var(--error-color)">ç½‘ç»œè¿æ¥å¤±è´¥</p>';
            }
        }

        async function deleteEntry(id) {
            if (!confirm("ç¡®å®šè¦åˆ é™¤è¿™æ¡æ—¥è®°å—ï¼Ÿè¿™ä¸ªé­”æ³•æ— æ³•æ’¤é”€å“¦ï¼")) return;
            try {
                const res = await fetch(`${API_BASE}?id=${id}`, {
                    method: 'DELETE',
                    headers: { 'Authorization': currentPwd }
                });
                
                if (res.ok) {
                    showMessage("å·²ä¸ºä½ æ¸…é™¤äº†è¿™æ¡è®°å½•çš„ç—•è¿¹ï¼"); 
                    loadEntries(false);
                } else {
                    alert('åˆ é™¤å¤±è´¥ï¼Œå¯èƒ½æ²¡æœ‰æƒé™ã€‚');
                }
            } catch (err) {
                alert('ç½‘ç»œé”™è¯¯ï¼Œæ— æ³•åˆ é™¤ã€‚');
            }
        }

        function renderEntries(entries) {
            const listEl = document.getElementById('entries-list');
            listEl.innerHTML = '';
            if (!entries || entries.length === 0) { listEl.innerHTML = '<p style="text-align: center; color: var(--text-light);">æš‚æ— è®°å½•</p>'; return; }

            entries.forEach(item => {
                const div = document.createElement('div'); div.className = 'entry-item';
                const date = new Date(item.timestamp);
                const dateStr = `${date.getFullYear()}-${String(date.getMonth()+1).padStart(2,'0')}-${String(date.getDate()).padStart(2,'0')} ${String(date.getHours()).padStart(2,'0')}:${String(date.getMinutes()).padStart(2,'0')}`;
                
                let html = `
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px;">
                        <div class="entry-date" style="margin-bottom: 0;">${dateStr}</div>
                        <button class="btn-delete" onclick="deleteEntry('${item.id}')">å‰Šé™¤ (Delete)</button>
                    </div>
                `;

                if (item.data.memo) html += `<div class="entry-memo">ğŸ“Œ ${escapeHtml(item.data.memo)}</div>`;
                if (item.data.diary) html += `<div class="entry-text">${escapeHtml(item.data.diary)}</div>`;
                if (item.data.image) html += `<img class="entry-image" src="${item.data.image}" alt="æ—¥è®°é…å›¾">`;

                div.innerHTML = html; listEl.appendChild(div);
            });
        }

        function escapeHtml(unsafe) {
            return unsafe.replace(/&/g, "&amp;").replace(/</g, "&lt;").replace(/>/g, "&gt;").replace(/"/g, "&quot;").replace(/'/g, "&#039;");
        }

        // ==========================================
        // çœ‹æ¿å¨˜æ ¸å¿ƒç³»ç»Ÿ (å¸¦æœ‰è‡ªåŠ¨é”™è¯¯è¯Šæ–­çš„ PIXI å¼•æ“)
        // ==========================================
        let waifuTipsTimer = null;

        function showMessage(text, timeout = 5000) {
            const tips = document.getElementById('waifu-tips');
            tips.innerHTML = text;
            tips.classList.add('waifu-tips-active');
            
            clearTimeout(waifuTipsTimer);
            waifuTipsTimer = setTimeout(() => {
                tips.classList.remove('waifu-tips-active');
            }, timeout);
        }

        async function initLive2D() {
            // ä¸€å¼€å§‹å°±æ˜¾ç¤ºæ­£åœ¨åŠ è½½
            showMessage("ğŸª„ æ­£åœ¨å¬å”¤èŠ™è‰è²ï¼Œè¯·ç¨ç­‰...");

            const canvas = document.getElementById('waifu-canvas');
            const app = new PIXI.Application({
                view: canvas, transparent: true, backgroundAlpha: 0, width: 280, height: 320
            });

            // å¦‚æœæŠ¥é”™ 404ï¼Œå¤§æ¦‚ç‡æ˜¯å¤§å°å†™é”™è¯¯æˆ–è€…è·¯å¾„å†™é”™äº†ï¼
            const modelUrl = "./Frieren/Frieren.model3.json";

            try {
                // è¯»å–æ¨¡å‹
                const model = await PIXI.live2d.Live2DModel.from(modelUrl);
                app.stage.addChild(model);

                // ç¼©æ”¾é€‚é…
                const scaleX = canvas.width / model.width;
                const scaleY = canvas.height / model.height;
                model.scale.set(Math.min(scaleX, scaleY) * 1.2); 
                model.x = (canvas.width - model.width * model.scale.x) / 2;
                model.y = canvas.height - model.height * model.scale.y + 20;

                // è§†çº¿è¿½è¸ª
                app.ticker.add(() => {
                    const mouse = app.renderer.plugins.interaction.mouse.global;
                    model.focus(mouse.x, mouse.y);
                });

                // ç‚¹å‡»äº’åŠ¨
                model.on('pointertap', () => {
                    const hitTexts = [
                        "åˆç‚¹æˆ‘ï¼Ÿä¸å¥½å¥½å­¦ä¹ çš„è¯ï¼Œæˆ‘å¯æ˜¯ä¼šç”Ÿæ°”çš„ã€‚",
                        "é­”æ³•çš„ä¿®è¡Œï¼Œå¯ä¸èƒ½åƒè¿™æ ·å·æ‡’å“¦ã€‚",
                        "å—¯... æ€ä¹ˆäº†ï¼Ÿ",
                        "è¾›ç¾å°”å½“å¹´å¯ä¸ä¼šä¸€ç›´è¿™æ ·æˆ³æˆ‘ã€‚"
                    ];
                    const text = hitTexts[Math.floor(Math.random() * hitTexts.length)];
                    showMessage(text);
                });

                // åŠ è½½æˆåŠŸæç¤º
                setTimeout(() => {
                    if(document.getElementById('auth-overlay').style.display === 'none') {
                        showMessage("æˆ‘å‡†å¤‡å¥½å•¦ï¼");
                    } else {
                        showMessage("æˆ‘å·²ç»åˆ°äº†ï¼Œå…ˆè¾“å…¥å¯†ç è¿›æˆ¿é—´å§~");
                    }
                }, 1000);

            } catch (e) {
                console.error("æ¨¡å‹åŠ è½½å‘ç”Ÿäº†è‡´å‘½é”™è¯¯: ", e);
                // ğŸŒŸ ã€ç¥çº§æ”¹åŠ¨ã€‘ç›´æ¥æŠŠé”™è¯¯ä¿¡æ¯æ‰“å°åˆ°æ°”æ³¡ä¸Šï¼Œè®©ä½ ä¸€ç›®äº†ç„¶ï¼ ğŸŒŸ
                let errorMsg = "æ¨¡å‹åŠ è½½å¤±è´¥ï¼š<br>";
                if (e.message.includes("404")) {
                    errorMsg += "âš ï¸ æ‰¾ä¸åˆ°æ–‡ä»¶(404)ï¼è¯·ä¸¥æ ¼æ£€æŸ¥ Frieren.model3.json é‡Œé¢å†™çš„æ–‡ä»¶å<b>å¤§å°å†™</b>æ˜¯å¦å’Œå®é™…æ–‡ä»¶ä¸€æ¨¡ä¸€æ ·ï¼LinuxæœåŠ¡å™¨å¯¹å¤§å°å†™æåº¦æ•æ„Ÿï¼";
                } else if (e.message.includes("fetch")) {
                    errorMsg += "âš ï¸ ç½‘ç»œåŠ è½½å¤±è´¥ï¼å¯èƒ½æ˜¯ Cloudflare æŠ½é£ï¼Œæˆ–è€…è·¯å¾„ä¾ç„¶å†™é”™ã€‚";
                } else {
                    errorMsg += `<span style="color:red;font-size:12px;">${e.message}</span><br>æŒ‰ F12 çœ‹çœ‹æ§åˆ¶å°çš„çº¢è‰²æŠ¥é”™å§ã€‚`;
                }
                showMessage(errorMsg, 20000); // é”™è¯¯ä¿¡æ¯åœç•™20ç§’
            }
        }
    </script>
</body>
</html>
